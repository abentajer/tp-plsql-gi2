set serveroutput on;

CREATE TABLE CLIENT(
    CODE_CLIENT NUMBER PRIMARY KEY,
    NOM VARCHAR2(30) NOT NULL,
    ADRESSE_VILLE VARCHAR2(100) NOT NULL,
    DATE_CONTACT DATE NOT NULL,
    EMAIL VARCHAR2(30) NOT NULL,
    FOREIGN KEY (CODE_REGION) REFERENCES REGION(CODE_REGION));

CREATE TABLE REGION(
    CODE_REGION NUMBER PRIMARY KEY,
    LIBELLE_REGION VARCHAR2(30) NOT NULL);
    
CREATE TABLE COMMANDE(
    CODE_COMMANDE NUMBER PRIMARY KEY,
    MONTANT_HT NUMBER NOT NULL,
    MONTANT_TTC NUMBER NOT NULL,
    DATE_COMMANDE DATE NOT NULL,
    REGLAGE NUMBER,
    FOREIGN KEY (CODE_CLIENT) REFERENCES CLIENT(CODE_CLIENT));
    
CREATE TABLE CMD_CONTENIR(
    QTE_COMMANDE NUMBER NOT NULL,
    CODE_COMMANDE NUMBER PRIMARY KEY,
    REF_PRODUIT NUMBER PRIMARY KEY,
    FOREIGN KEY (CODE_COMMANDE) REFERENCES COMMANDE(CODE_COMMANDE),
    FOREIGN KEY (REF_PRODUIT) REFERENCES PRODUIT(REF_PRODUIT));
    
CREATE TABLE FAMILLE(
    CODE_FAMILLE NUMBER PRIMARY KEY,
    LIBELLE_FAMILLE VARCHAR2(30) NOT NULL);

CREATE TABLE CATEGORIE(
    CODE_CATEGORIE NUMBER PRIMARY KEY,
    LIBELLE_CATEGORI VARCHAR2(30) NOT NULL);

CREATE TABLE PRODUIT(
    REF_PRODUIT VARCHAR2(20) PRIMARY KEY,
    LIBELLE_PRODUIT VARCHAR2(200) NOT NULL,
    PU NUMBER NOT NULL,
    TVA VARCHAR2(20) NOT NULL,
    FOREIGN KEY (CODE_FAMILLE) REFERENCES CLIENT(CODE_FAMILLE),
    FOREIGN KEY (CODE_CATEGORIE) REFERENCES CLIENT(CODE_CATEGORIE));